!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("highlight.js/lib"),require("@angular/core"),require("@angular/platform-browser"),require("@angular/material/tooltip"),require("@angular/common"),require("@angular/cdk/clipboard"),require("@angular/material/icon"),require("@angular/material/button")):"function"==typeof define&&define.amd?define("@covalent/highlight",["exports","highlight.js/lib","@angular/core","@angular/platform-browser","@angular/material/tooltip","@angular/common","@angular/cdk/clipboard","@angular/material/icon","@angular/material/button"],t):t(((e=e||self).covalent=e.covalent||{},e.covalent.highlight={}),e.lib,e.ng.core,e.ng.platformBrowser,e.ng.material.tooltip,e.ng.common,e.ng.cdk.clipboard,e.ng.material.icon,e.ng.material.button)}(this,(function(e,t,o,n,i,r,p,a,l){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var d=function(){function e(e,t,n,i){this._renderer=e,this._elementRef=t,this._domSanitizer=n,this.cdr=i,this._initialized=!1,this._lang="typescript",this.copyCodeToClipboard=!1,this.copyCodeTooltips={},this.contentReady=new o.EventEmitter}return Object.defineProperty(e.prototype,"content",{set:function(e){this._content=e,this._initialized&&this._loadContent(this._content)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lang",{set:function(e){if(!e)throw new Error("Error: language attribute must be defined in TdHighlightComponent.");this._lang=e,this._initialized&&this._loadContent(this._content)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewChecked=function(){this.cdr.detectChanges()},e.prototype.ngAfterViewInit=function(){this._content?this._loadContent(this._content):this._loadContent(this.highlightComp.nativeElement.textContent),this._initialized=!0},e.prototype._loadContent=function(e){e&&e.trim().length>0&&(this._renderer.setProperty(this._elementRef.nativeElement,"innerHTML",""),this._elementFromString(this._render(e)),this.copyCodeToClipboard&&this._renderer.appendChild(this._elementRef.nativeElement,this.copyComp.nativeElement)),this.contentReady.emit()},e.prototype._elementFromString=function(e){var t=this._renderer.createElement("pre");this._renderer.appendChild(this._elementRef.nativeElement,t);var n=this._renderer.createElement("code");return this._renderer.appendChild(t,n),this._renderer.addClass(n,"highlight"),n.innerHTML=this._domSanitizer.sanitize(o.SecurityContext.HTML,e),t},e.prototype._render=function(e){var o=(e=e.replace(/^(\s|\t)*\n+/g,"").replace(/(\s|\t)*\n+(\s|\t)*$/g,"")).split("\n"),n=o[0].match(/^(\s|\t)*/)[0],i=new RegExp("^"+n),r=(o=o.map((function(e){return e.replace('=""',"").replace(i,"").replace(/\s+$/,"")}))).join("\n").replace(/\{ \{/gi,"{{").replace(/\} \}/gi,"}}").replace(/&lt;/gi,"<").replace(/&gt;/gi,">");this.copyContent=r;var p=t.highlight(this._lang,r,!0);return p.value=p.value.replace(/=<span class="hljs-value">""<\/span>/gi,"").replace("<head>","").replace("<head/>",""),p.value},e.decorators=[{type:o.Component,args:[{selector:"td-highlight",template:'<div>\n  <div #highlightComponent>\n    <ng-content></ng-content>\n  </div>\n\n  <div #copyComponent *ngIf="copyCodeToClipboard">\n    <td-copy-code-button\n      [copiedContent]="copyContent"\n      [copyCodeToClipboard]="copyCodeToClipboard"\n      [copyCodeTooltips]="copyCodeTooltips"\n    ></td-copy-code-button>\n  </div>\n</div>\n',styles:[':host ::ng-deep{overflow-x:auto;padding:16px;display:-ms-flexbox;display:flex}:host ::ng-deep .highlight,:host ::ng-deep code,:host ::ng-deep pre{font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace}:host ::ng-deep pre{display:block;overflow-x:auto;padding:0;margin:0;background:0 0;font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace;line-height:1.45;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-font-smoothing:auto;-webkit-text-size-adjust:none;position:relative;border-radius:2px;font-size:.8rem;width:100%}:host ::ng-deep code{margin:0;padding:0;overflow-wrap:break-word;white-space:pre-wrap}:host ::ng-deep .highlight{display:block;overflow-wrap:break-word;line-height:1.5;margin:0}:host ::ng-deep .copy-button{border:none;background:inherit;margin-top:-8px;margin-right:-8px}']}]}],e.ctorParameters=function(){return[{type:o.Renderer2},{type:o.ElementRef},{type:n.DomSanitizer},{type:o.ChangeDetectorRef}]},e.propDecorators={content:[{type:o.Input,args:["content"]}],copyCodeToClipboard:[{type:o.Input}],copyCodeTooltips:[{type:o.Input}],lang:[{type:o.Input,args:["lang"]}],contentReady:[{type:o.Output}],highlightComp:[{type:o.ViewChild,args:["highlightComponent"]}],copyComp:[{type:o.ViewChild,args:["copyComponent"]}],tooltip:[{type:o.ViewChild,args:["tooltip"]}]},e}();var c=function(){function e(){this.copyCodeToClipboard=!1,this.copyCodeTooltips={}}return Object.defineProperty(e.prototype,"copyTooltip",{get:function(){return this.copyCodeTooltips&&this.copyCodeTooltips.copy||"Copy"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copiedTooltip",{get:function(){return this.copyCodeTooltips&&this.copyCodeTooltips.copied||"Copied"},enumerable:!0,configurable:!0}),e.prototype.textCopied=function(e){e&&(this.tooltip.hide(),this.tooltip.message=this.copiedTooltip,this.tooltip.show())},e.prototype.initializeTooltip=function(){var e=this;setTimeout((function(){e.tooltip.message=e.copyTooltip}),200)},e.decorators=[{type:o.Component,args:[{selector:"td-copy-code-button",template:'<button\n  mat-icon-button\n  [cdkCopyToClipboard]="copiedContent"\n  class="copy-button"\n  [matTooltip]="copyTooltip"\n  #tooltip="matTooltip"\n  (cdkCopyToClipboardCopied)="textCopied($event)"\n>\n  <mat-icon role="img">content_copy</mat-icon>\n</button>\n',styles:[""]}]}],e.propDecorators={copiedContent:[{type:o.Input}],copyCodeToClipboard:[{type:o.Input}],copyCodeTooltips:[{type:o.Input}],tooltip:[{type:o.ViewChild,args:["tooltip"]}],initializeTooltip:[{type:o.HostListener,args:["mouseleave"]}]},e}();var s=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[r.CommonModule,p.ClipboardModule,a.MatIconModule,i.MatTooltipModule,l.MatButtonModule],declarations:[d,c],exports:[d]}]}],e}();e.CovalentHighlightModule=s,e.TdCopyCodeButtonComponent=c,e.TdHighlightComponent=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=covalent-highlight.umd.min.js.map